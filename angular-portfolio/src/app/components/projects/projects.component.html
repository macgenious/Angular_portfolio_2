<section id="projects" class="projects-section">
  <div class="container" *ngIf="!showTypingGame; else typingGameView">
    <h2>PROJECTSHOWCASE</h2>
    <p class="section-subtitle">A collection of my finest work, showcasing technical skills and creative solutions.</p>
    
    <div class="project-filters">
      <button 
        *ngFor="let category of categories"
        [class.active]="(activeFilter$ | async) === category"
        (click)="filterProjects(category)">
        {{ category }}
      </button>
    </div>

    <div class="project-carousel-container">
      <div class="project-carousel-track" #carouselTrack>
        <div 
          *ngFor="let project of visibleCards; let i = index"
          class="project-card"
          [attr.data-category]="project.category"
          [style.transform]="getCardTransform(i)"
          [style.opacity]="getCardOpacity(i)"
          [style.zIndex]="getCardZIndex(i)"
          (click)="onProjectClick(project)">
          <div class="project-card-image" [style.backgroundImage]="'url(' + project.imageUrl + ')'">
            <img [src]="project.imageUrl" alt="" loading="lazy" decoding="async" />
            <div class="overlay">{{ project.category }}</div>
          </div>
          <div class="project-card-title">
            <h3>{{ project.title }}</h3>
          </div>
        </div>
      </div>
    </div>

    <div class="no-projects-message" *ngIf="visibleCards.length === 0">
      No projects found for this category.
    </div>
  </div>

  <ng-template #typingGameView>
    <div class="game-wrapper">
      <button class="game-back" (click)="closeTypingGame()">‚Üê Back to Projects</button>
      <app-typing-game [embedded]="true"></app-typing-game>
    </div>
  </ng-template>
</section>
